<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>03-渲染器</title>
</head>
<body>
    <script>
        const vnode = {
            tag:"div",
            props:{
                onclick:()=>console.log("hello pingping")
            },
            children:"please click me"
        }

        renderer(vnode, document.body)

function renderer(vnode, container){
    // 使用vnode的tag作为标签名渲染DOM元素
    const el = document.createElement(vnode.tag)
    // 遍历vnode的props作为DOM元素的属性和事件
    for(const key in vnode.props){
        if(/^on/.test(key)){
            // 如果key以on开头，这说明他是一个事件
            el.addEventListener(
                key.substring(2).toLowerCase(),//事件名称将onClick-->click
                vnode.props[key]//事件处理函数
            )
        }
    }

    // 处理children
    if(typeof vnode.children === "string"){
        // 如果是字符串，直接作为元素的文本子节点
        el.appendChild(document.createTextNode(vnode.children))
    }else if(Array.isArray(vnode.children)){
        // 递归调用renderer函数进行渲染子节点，使用当前元素el作为挂载点
        vnode.children.forEach(child=>renderer(child,el))
    }
    // 将元素添加到挂载点
    container.appendChild(el)
}
    </script>
</body>
</html>